<div *ngIf="false"> https://material.angular.io/components/menu/overview </div>
<div class=hide-unhide>
	<button (click)='show_map()' *ngIf='show_body==C.BODY_SHOW' > Map {{C.ICON_ARROW_UP}}  </button>
	<button (click)='show_body=C.BODY_SHOW'   *ngIf='show_body==C.BODY_NOSHOW' > {{C.ICON_ARROW_DOWN}}</button>
</div>

<div class="title" *ngIf='form_key==C.KEY_FORM_TRIP' >Publish my Trip</div>
<div class="title" *ngIf='form_key==C.KEY_FORM_SEARCH' >Search Settings</div>
<div class={{show_body}} >
	<form [formGroup]="form" (ngSubmit)="onSubmit()" *ngIf='show_form==C.BODY_SHOW'>
		<dl> 
			<dt>
					I am 
					<label><input type="radio" formControlName='rider_ind' [value]=false />Driver</label> 
					<label><input type="radio" formControlName='rider_ind' [value]=true  />Rider</label>
			</dt>
	  		<dt>
				{{from}}
				<span class='clickable-text button' (click)='current_location()'>Current Location</span>
			</dt>
			<div *ngIf='current_location_msg'    class='warning' [innerHTML]='current_location_msg' ></div>
			
	  		<dd>
	   			<input  type="text"  id="p1_loc" formControlName="p1_loc" 
					placeholder="From" required
					pattern=".{3,}"
				/>
				<span class="validity"></span>
			</dd>

	  		<dd  class="f08 "  > 
				 {{trip.p1.display_name}}
			</dd>
		</dl>

		<dl >
	  		<dt>
				{{to}}
			</dt>
	  		<dd>
				<span>
	   				<input  type="text"  id="p2_loc" formControlName="p2_loc" 
						placeholder="To" required
						pattern=".{3,}"
					/>
					<span class="validity" 
						*ngIf='this.form_key==C.KEY_FORM_TRIP || this.form.value.rider_ind'>
					</span>
				</span>&nbsp;
				<span class='clickable-text button' (click)='switch_loc()' 
					[innerHTML]='C.ICON_UPDOWN_ARROW'></span>
			</dd>
			<dd class="f08 " >
				{{trip.p2.display_name	}}
			</dd>
			<dt>
			Distance (miles): 
			<span *ngIf="trip.distance==C.ERROR_NO_ROUTE " class=warning>No route</span>
			<span *ngIf="trip.distance!=C.ERROR_NO_ROUTE "	   >{{trip.distance}}</span>
			</dt>
		</dl>

		<table class=no_border *ngIf='form_key==C.KEY_FORM_TRIP'>
			<tr>
				<td>
					Trip Date
				</td>
				<td>
					Departure Time
				</td>
			</tr>
			<tr>
				<td>
					<input type="date" formControlName="trip_date" *ngIf='form_key==C.KEY_FORM_TRIP'
						pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}" min={{today}} 
						required 
					/>
					<span class="validity"></span>
				</td>
				<td>
					<input type="time" formControlName="trip_time" step="60" 
						required />
					<span class="validity"></span>
				</td>
			</tr>
		</table>
		<table class=no_border *ngIf='form_key==C.KEY_FORM_SEARCH'>
			<tr>
				<td>
					Dates between
				</td>
				<td>
					and	
				</td>
			</tr>
			<tr>
				<td>
					<input type="date" formControlName="date1" 
						pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}" min={{today}} 
						required 
					/>
					<span class="validity"></span>
				</td>
				<td>
					<span class="validity"></span>
					<input type="date" formControlName="date2" 
						pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}" min={{this.form.value.date1}} 
						required 
					/>
					<span class="validity"></span>
				</td>
			</tr>
			<tr>
				<td>
					Departure Time
				</td>
				<td>
					<input type="time" formControlName="trip_time" step="60" 
						required />
					<span class="validity"></span>
				</td>
			</tr>
		</table>

		<dl >
			<dt>
					Or in 
					<label><input name=set_time type="radio" (click)='set_time(5)'  />5</label>
					<label><input name=set_time type="radio" (click)='set_time(10)'  />10</label>
					<label><input name=set_time type="radio" (click)='set_time(15)'  />15</label>
					<label><input name=set_time type="radio" (click)='set_time(30)'  />30</label>
					munites
			</dt>
		</dl>
		<p>
		<dl >
			<dt>
			<span *ngIf='!this.form.value.rider_ind'>Available Seats: </span>
			<span *ngIf='this.form.value.rider_ind' >Requested Seats: </span>
	  		<span>
				{{this.form.value.seats}} &nbsp;&nbsp;
				<input type="range" formControlName="seats" value="{{form.value.seats}}"  class='zoom'
					min="1" max="{{C.MAX_SEATS}}" step=1 /> 
	  		</span>
			</dt>

			<dt>Price: ${{this.form.value.price}} per mile per passenger.
				<span *ngIf='this.form.value.rider_ind && this.form_key==C.KEY_FORM_TRIP'> Estimated cost: 
					$ {{this.estimate_cost()}}
				</span>
			</dt>
	  		<dd>
				<input type="range" class='zoom' formControlName="price" value="0" step=0.01 min="0" 
					max="{{max_price}}"  required
				/>
				<span class="validity" ></span>
	  		</dd>
		</dl>
		<dl *ngIf='form_key==C.KEY_FORM_TRIP'>
	  		<dt>Description</dt>
	  		<dd >
				<textarea id="description" formControlName=description 
					placeholder="For example, non-smoking, female only, flexible time, flexible pickup,etc" >
					{{form.value.description}} 
				</textarea>
	  		</dd>
		</dl>
		<dl *ngIf='form_key==C.KEY_FORM_SEARCH'>
            You can reduce number of search results by narrowing down searches.
            <dt><label for="seats">Narrowing Level: {{this.form.value.search_tightness}}  </label></dt>
            <dd>
            wide <input type="range" formControlName="search_tightness" 
				min="0" max="{{C.MAX_SEARCH_TIGHTNESS}}" step=1 /> narrow
            </dd>

        </dl>
		<div *ngIf='error_msg'      class=error 	[innerHTML]='error_msg' ></div>
		<div *ngIf='info_msg'       class='info' 	[innerHTML]='info_msg' ></div>
		<div *ngIf='warning_msg'    class='warning' [innerHTML]='warning_msg' ></div>
		<div *ngIf='validation_error'    class='warning' [innerHTML]='validation_error' ></div>

		<button  type="submit" [disabled]="validation_error" *ngIf='form_key==C.KEY_FORM_TRIP' >
			{{button_label}}
		</button>
        <button type="submit" *ngIf='form_key==C.KEY_FORM_SEARCH' [disabled]="validation_error" >
            Save Settings to this Device and Start Map Search
        </button>


      </form>
</div>
